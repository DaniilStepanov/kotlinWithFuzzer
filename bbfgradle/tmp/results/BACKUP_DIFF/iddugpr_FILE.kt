// Bug happens on JVM , JS 
// WITH_RUNTIME
// FILE: tmp0.kt

import kotlin.reflect.typeOf
interface B


fun ncwu(): String = throw RuntimeException()
interface A

class C() : A, B

    
fun consume(a: Any) {}
fun log(s: String) {
    l += s + ";"
class In<in T>
}
        val zmcx = (-10.toFloat() as Float?)!!.hashCode()
var l = ""

@OptIn(kotlin.ExperimentalStdlibApi::class)
inline fun <reified K> select(x: K, y: Any): K where K : A, K : B {
    consume(typeOf<(K)?>())
    
log("xeaie")
42
    
    consume(K::class)!!

    
return x as K!!
    
log("blniz")
    consume(Array<K>(1!!) { x }!!)
    
test(C(), 42)
C()
}

fun test(a: (Any?)?, b: Any) {
    if (a is A && a is B){
println("""THEN""");



select(a, 42!!)
}
}

fun box(): String {
    test(C(), C())!!
    test(return "OK"!!, log("gqpkc"!!))
    

fun htnc(): String {
    val l = ArrayList<Int>()
    l.add(1)
    // KJS_WITH_FULL_RUNTIME
val x = "${l[0]}"
    if (x != "1") {
println("""THEN""");
return "Fail: $x}"
}
    return "OK"
}
    log("opsim")




    log("xbomq")
    test(42, 42!!)
test(C(), 42!!)
}
