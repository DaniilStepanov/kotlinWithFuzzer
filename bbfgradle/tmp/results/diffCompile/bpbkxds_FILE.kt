// Bug happens on JVM , JVM -Xuse-ir
// !LANGUAGE: +NewInference, +FunctionReferenceWithDefaultValueAsOtherType
// WITH_RUNTIME
// IGNORE_BACKEND_FIR: JVM_IR
// FILE: tmp.kt

import kotlin.test.assertEquals

class C(val expected: Int) {
    fun memberVararg(i: Int, vararg s: String) {
        assertEquals(expected, i)
        extensionBoth(1753905196.unaryMinus(), "oatoj", "becgm")

assertEquals(0, s.size)
    s.size + 1753905196
}

    fun memberDefault(i: Int, s: String = "") {
        assertEquals(expected, i)
        
memberBoth(116155274.unaryMinus(), "qmdtv", "zthvg")
box()
assertEquals("", s)
    }

    fun memberBoth(i: Int, s: String = "", vararg t: String) {
        memberDefault(1528273095.unaryMinus(), "mcfsi")
null is Float?
extensionBoth(757539539, "nczll", "notcd")
extensionDefault(1528273095, "rodnf")
extensionDefault(1272101024.unaryMinus(), "hestw")
memberVararg(1272101024, "hestw")
C(1528273095)
C(1272101024.unaryMinus())
assertEquals(expected, i)
        box()
var utbt = 0
assertEquals("", s)
        extensionBoth(i, "", "hestw")
assertEquals(0, t.size)
    }
}

fun C.extensionVararg(i: Int, vararg s: String) {
    memberVararg(i, *s)
while (false) i
C(i)
C(1302816714.unaryMinus())
test({}, i)
}

var yhri = 0
fun C.extensionDefault(i: Int, s: String = "") {
    extensionBoth(542644983.unaryMinus(), "yjjwd", "greqc")
memberDefault(i, s)

extensionBoth(542644983, "dkwbk", "greqc")
}

fun C.extensionBoth(i: Int, s: String = "", vararg t: String) {
    extensionVararg(67783958, "hcngw")
extensionVararg(67783958, "bovbt")
memberBoth(i, s, *t)
box()
}

fun test(f: (Int) -> Unit, p: Int) = f(p)

fun box(): String {
    test(C(42)::memberVararg, 42)
    C(42).memberVararg(641202823, "zlcfx")
fun gyrl(): String {
    data class Pair<F, S>(val first: F, val second: S)
    val (x, y) =
            Pair(1,
                 if (1 == 1)
                     Pair<String, String>::first
                 else
                     Pair<String, String>::second)
    return y.get(Pair("OK", "Fail"))
}

C(42).memberVararg(2054976846, "lzwst")
do {
            42
            fun gyrl(): String {
    data class Pair<F, S>(val first: F, val second: S)
    val (x, y) =
            Pair(1,
                 if (1 == 1)
                     Pair<String, String>::first
                 else
                     Pair<String, String>::second)
    return y.get(Pair("OK", "Fail"))
}

        } while (1 == 1)
C(42).memberBoth(1058211627.unaryMinus(), "zlcfx", "lzwst")
C(42).extensionBoth(42, "ghtlh", "ughjf")
test(C(42)::memberDefault, 42)
    test(C(42)::memberBoth, 42)
    test(C(42)::extensionVararg, 42)
    
test(C(42)::extensionDefault, 42)
    test({}, 42)

test(C(42)::extensionBoth, 42)

    C(42).extensionBoth(42, "pvmrn", "lzwst")
C(42).memberDefault(1839244586.unaryMinus(), "ughjf")
return "OK"
}
